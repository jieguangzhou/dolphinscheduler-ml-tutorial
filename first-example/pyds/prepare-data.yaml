# Define variable `repository`
repository: &repository "/data/dvc/repo/airplane" 
top_n: &top_n 500000
version: &version v2
message: &message data 500000

# Define the workflow
workflow:
  name: "prepare-data"
  run: run

# Define the tasks under the workflow
tasks:
  - name: data_preprocessing 
    task_type: Python
    definition: $FILE{"../data_preprocessing.py"}
    local_params:
      - { "prop": "top_n", "direct": "IN", "type": "VARCHAR", "value": *top_n}
      - { "prop": "output_path", "direct": "IN", "type": "VARCHAR", "value": /data/preprocessing/airplane/data}

  - name: upload_data
    deps: [data_preprocessing]
    task_type: DVCUpload
    repository: *repository
    data_path_in_dvc_repository: "data"
    data_path_in_worker: /data/preprocessing/airplane/data  
    version: *version
    message: *message 
